
Purpose: C program to send sample data formatted in the OSIsoft Message format (OMF) to a REST endpoint

Requirement:

1. windows or Linux environment with a c compiler
2. files included in this sample
3. installed and configured PI Data Collection Manager and PI Connector Relay
3a. OMF application configured using PI Data Collection Manager 
   The Producer Token and Relay Ingress URL generated by this configuration will be used to run and configure the sample.
3b. OSIsoft Cloud Services tenant and publisher provisioned
   The endpoint and token string will be used to configure the sample
3c. Edge Data Store tenant and namespace configured and the security token is known
   The endpoint (based upon the tenant and namespace) and token will be used to configure the sample
Setup:

1. extract files and update main.c, set the define statement TOKEN to the producer token or token 
2. build program

2a. Windows: There is a .sln file for use with Visual Studio

2b. Linux: Run make from the c/omfDemo/omfDemo directory

3. After a succesful build, run the program, for example on Linux

For PI Connector Relay endpoint
   omfDemo relayServerName portNumber
   
For OSIsoft Cloud Services
   omfDemo OCSEndPointName 443 /api/omf 

For Edge Data Store
   omfDemo EDSEndPointName 5000 /edge/omf/tenants/thetenant/namespaces/thenamespace 

The program will send a set of defintions and then send data values for a period of time or until the program is stopped.

To disable the certificate check add noCertCheck to the command line:

omfDemo server port noCertCheck

To generate the OMF messages only (and not send to an endpoint) add test to the command line:

omfDemo server port test


See also: https://pisquare.osisoft.com/community/developers-club/omf - Group with links to additional content and discuss all things OMF
