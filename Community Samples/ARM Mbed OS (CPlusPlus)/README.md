This is a more full-featured OMF example that breaks out different parts of the program into an OMF helper library and into separate configuration files.  Within the main script, OMF types are sent along to a target system, using the definitions created by the helper library and contained within the config.customOMFJSONStructures.h file, and an OMF container is instantiated, using those OMF types (which instructs the receiving system to be able to properly parse the messages it receives, using the type schemas that were previously supplied).  OMF-formatted values are then sent to that container, in order to a) create a new PI AF Element, b) position that element within a PI AF database, c) link that PI AF Element to the PI Points that are created to hold new sensor values, and then finally, d) actually send along those sensor values, and in turn, create PI Points to store those values.  

This program is structured so that the config header files are where a user can customize this script to fit his or her specific needs--for example, to call third-party libraries to actually send data from specific attached sensors, or to customize the OMF message types to send along data for additional sensors beyond the two sensors listed in the example.  The user also has the option to edit the values of variables that will define the name of the PI AF Element and PI AF Element Template that will be created.  The osisoft-omf library takes care of assembling some of the OMF messages for the user, and contains other helpful functions required by a program written in C++; this library shouldn't typically need any modification.

In short, it is hoped that by cloning this program onto a device, with a few slight modifications to the configuration header files, a user can quickly set up an arbitrary device to send along data to an OMF endpoint.  For additional information on OMF, including details that can help explain the role and structure of the message types used in this script, please consult the online OMF documentation, which can be found at http://omf-docs.osisoft.com/.
